<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Claim Haircomb</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css"> <!-- Link to your styles.css file -->
</head>
<body onLoad="javascript:loadClaims()">
    <div class="header"></div>

    <div class="chart-container">
        <div class="data-above-chart">
        
                <!-- Top Fee -->
                <div class="top-fee">
                    <div class="top-fee-text">Top Fee:</div>
                    <span id="topFeeMBTC">Loading...</span><br>
                    <div id="topFeeAddr" class="p2wsh-address" style="font-size: 0.8em;">Loading...</div>
                </div>
                
                <!-- Comb Price -->
                <div class="comb-price">
                    <div class="comb-price-text">Comb Price:</div>
                    <span id="combPriceDollars">Loading...</span>
                </div>
            
            <div class="mempool-transactions-box">
                <div class="content-wrapper">
                <ul id="transactionList">
                    <!-- Updated list items for mem pool transactions with mock data -->
                    <li>Loading...</li>
                    <!-- ... more list items ... -->
                </ul>
            </div>
            </div>
        </div>
        <canvas id="myChart"></canvas>
    </div>
    
    
</div>
<!-- Include Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/min/moment.min.js"></script>


<script>
    // Initialize the chart with dynamic sizing and specific data intervals
    var ctx = document.getElementById('myChart').getContext('2d');
    var chart = new Chart(ctx, {
        type: 'scatter', // Use scatter for the dot chart
        data: {
            datasets: [{
                label: 'Top Fee',
                backgroundColor: '#ffffff', // Darker pink for dots
                borderColor: 'pink', // Border color for the dots
                data: [],
                showLine: true, // Line connecting the dots
                pointRadius: 10, // Increase the radius of the points (4 times larger than default)
                pointHoverRadius: 12, // Optional: Increase the radius when hovering over the points
                fill: false // Whether to fill the area under the line
            },{
                label: 'Random Fee',
                backgroundColor: '#f71ba2', // Darker pink for dots
                borderColor: 'white', // Border color for the dots
                data: [],
                showLine: false, // No line connecting the dots
                pointRadius: 9, // Increase the radius of the points (4 times larger than default)
                pointHoverRadius: 11, // Optional: Increase the radius when hovering over the points
            }]
        },
        defaults: {
            elements: {
                line: {
                    backgroundColor: '#ffffff',
                    borderColor: '#ffffff'
                }
            },
        },
        options: {
            scales: {
                y: {
                    type: 'logarithmic',
                    beginAtZero: true,
                    suggestedMax: 100,
                    ticks: {
                        color: 'white', // Makes y-axis tick labels white
                        // Increase font size for visibility
                        font: {
                            size: 14, // You can adjust the size as needed
                        },
                    },
                    grid: {
                        color: 'white', // Makes y-axis grid lines white
                        lineWidth: 3, // Makes y-axis grid lines thicker
                        drawBorder: true, // Ensure the axis line is drawn
                    }
                },
                x: {
                    ticks: {
                        color: 'white', // Makes x-axis tick labels white
                        // Format x-axis tick labels to display hours
                        callback: function(value, index, values) {
                            return moment(value).format('HH:mm'); // Use moment.js to format the time
                        },
                        // Increase font size for visibility
                        font: {
                            size: 14, // You can adjust the size as needed
                        },
                    },
                    grid: {
                        color: 'white', // Makes x-axis grid lines white
                        lineWidth: 3, // Makes x-axis grid lines thicker
                        drawBorder: true, // Ensure the axis line is drawn
                    }
                }
            },
            plugins: {
                legend: {
                    labels: {
                        color: 'white', // Makes legend labels white
                    }
                },
                tooltip: {
                     callbacks: {
                        label: function(context) {
                            var commit = "";
                            for (var i in claims) {
                                var tclaim = claims[i];
                                if (tclaim.When.getTime() == context.parsed.x) {
                                    if (tclaim.FeeWeightKb / 1000 == context.parsed.y) {
                                        commit = segwitAddrEncodeFull(tclaim.Commitment)+": ";
                                        break;
                                    }
                                }
                            }
                            return commit + context.parsed.y + " sats/vB";
                        }
                    }
                }
            },
            layout: {
                padding: { // Padding around the canvas
                    top: 50, // 50px top padding
                    right: 100, // 100px right padding
                    bottom: 50, // 50px bottom padding
                    left: 100 // 100px left padding
                }
            },
        }
    });
    
    chart.update();
    </script>
    


<script src="haircomb.js" defer></script>
<script src="claim.js" defer></script>
<footer></footer>
</body>
</html>
